(this["webpackJsonp@gmateriel/web"]=this["webpackJsonp@gmateriel/web"]||[]).push([[0],{447:function(e,t,n){"use strict";n.r(t);var i,a,r,c,s=n(0),o=n.n(s),l=n(32),d=n.n(l),j=n(597),u=n(591),b=n(596),O=n(599),p=n(592),m=n(273),h=n(104),x=n(52),v=n(602),f=n(40),g=n(598),y=Object(g.a)(i||(i=Object(f.a)(["\n  {\n    users {\n      id\n      nom\n      prenom\n      fonction\n      email\n      password\n      level\n      materiels {\n        id\n        serie\n        detail {\n          id\n          type\n          marque\n        }\n      }\n    }\n  }\n"]))),w=Object(g.a)(a||(a=Object(f.a)(["\n  {\n    materiels {\n      id\n      serie\n      status\n      detail {\n        type\n        marque\n      }\n      user {\n        id\n        nom\n        prenom\n      }\n      technicien {\n        id\n        nom\n        prenom\n        contact\n      }\n    }\n  }\n"]))),q=Object(g.a)(r||(r=Object(f.a)(["\n  {\n    details {\n      id\n      type\n      marque\n      materiels {\n        id\n        serie\n        detail {\n          id\n          type\n          marque\n        }\n        user {\n          id\n          nom\n          prenom\n        }\n      }\n    }\n  }\n"]))),S=Object(g.a)(c||(c=Object(f.a)(["\n  {\n    techniciens {\n      id\n      nom\n      prenom\n      contact\n      maintenances {\n        id\n        serie\n        detail {\n          id\n          type\n          marque\n        }\n      }\n    }\n  }\n"]))),F=n(7),I=n(548),T=n(549),C=n(531),M=n(536),k=n(1);var E,A,L,D,N,$,U,P,W,_,V,Q,R,H,z=function(e){var t=e.isOpen,n=e.setIsOpen,i=e.children;return Object(k.jsx)(C.a,{open:t,onClose:function(){return n(!1)},maxWidth:"xs",children:Object(k.jsx)(M.a,{children:i})})},B=n(26),K=n(17),G=n(36),J=n(122),Y=n(546),X=n(547),Z=n(611),ee=Object(g.a)(E||(E=Object(f.a)(["\n  mutation addUser($addUserFields: AddUserInput!) {\n    addUser(addUserFields: $addUserFields) {\n      id\n      nom\n      prenom\n      fonction\n      email\n      password\n      level\n      materiels {\n        id\n        serie\n        detail {\n          id\n          type\n          marque\n        }\n      }\n    }\n  }\n"]))),te=Object(g.a)(A||(A=Object(f.a)(["\n  mutation updateUser($id: ID!, $updateUserFields: UpdateUserInput!) {\n    updateUser(id: $id, updateUserFields: $updateUserFields) {\n      id\n      nom\n      prenom\n      fonction\n      email\n      password\n      level\n      materiels {\n        serie\n        detail {\n          type\n          marque\n        }\n      }\n    }\n  }\n"]))),ne=Object(g.a)(L||(L=Object(f.a)(["\n  mutation deleteUser($userId: ID!) {\n    deleteUser(id: $userId)\n  }\n"]))),ie=Object(g.a)(D||(D=Object(f.a)(["\n  mutation addMateriel($addMaterielFields: AddMaterielInput!) {\n    addMateriel(addMaterielFields: $addMaterielFields) {\n      id\n      serie\n      detail {\n        type\n        marque\n      }\n      user {\n        id\n        nom\n        prenom\n        fonction\n      }\n    }\n  }\n"]))),ae=Object(g.a)(N||(N=Object(f.a)(["\n  mutation deleteMateriel($id: ID!) {\n    deleteMateriel(id: $id)\n  }\n"]))),re=Object(g.a)($||($=Object(f.a)(["\n  mutation updateMateriel(\n    $id: ID!\n    $updateMaterielFields: UpdateMaterielInput!\n  ) {\n    updateMateriel(id: $id, updateMaterielFields: $updateMaterielFields) {\n      id\n      serie\n      detail {\n        type\n        marque\n      }\n      user {\n        nom\n        prenom\n        fonction\n      }\n    }\n  }\n"]))),ce=Object(g.a)(U||(U=Object(f.a)(["\n  mutation updateMateriel(\n    $id: ID!\n    $updateMaterielFields: UpdateMaterielInput!\n  ) {\n    updateMateriel(id: $id, updateMaterielFields: $updateMaterielFields) {\n      id\n      serie\n      detail {\n        type\n        marque\n      }\n      user {\n        nom\n        prenom\n        fonction\n      }\n    }\n  }\n"]))),se=Object(g.a)(P||(P=Object(f.a)(["\n  mutation updateMateriel(\n    $id: ID!\n    $updateMaterielFields: UpdateMaterielInput!\n  ) {\n    updateMateriel(id: $id, updateMaterielFields: $updateMaterielFields) {\n      id\n      serie\n      detail {\n        type\n        marque\n      }\n      user {\n        nom\n        prenom\n        fonction\n      }\n    }\n  }\n"]))),oe=Object(g.a)(W||(W=Object(f.a)(["\n  mutation addDetail($addDetailFields: AddDetailInput!) {\n    addDetail(addDetailFields: $addDetailFields) {\n      id\n      type\n      marque\n      materiels {\n        id\n        serie\n        detail {\n          id\n          type\n          marque\n        }\n        user {\n          id\n          nom\n          prenom\n          fonction\n        }\n      }\n    }\n  }\n"]))),le=Object(g.a)(_||(_=Object(f.a)(["\n  mutation deleteDetail($id: ID!) {\n    deleteDetail(id: $id)\n  }\n"]))),de=Object(g.a)(V||(V=Object(f.a)(["\n  mutation updateDetail($id: ID!, $updateMaterielFields: UpdateDetailInput!) {\n    updateDetail(id: $id, updateMaterielFields: $updateMaterielFields) {\n      id\n      type\n      marque\n      materiels {\n        id\n        serie\n      }\n    }\n  }\n"]))),je=Object(g.a)(Q||(Q=Object(f.a)(["\n  mutation addTechnicien($addTechnicienFields: AddTechnicienInput!) {\n    addTechnicien(addTechnicienFields: $addTechnicienFields) {\n      id\n      nom\n      prenom\n      contact\n      maintenances {\n        id\n        serie\n        status\n        detail {\n          id\n          type\n          marque\n        }\n      }\n    }\n  }\n"]))),ue=Object(g.a)(R||(R=Object(f.a)(["\n  mutation deleteTechnicien($id: ID!) {\n    deleteTechnicien(id: $id)\n  }\n"]))),be=Object(g.a)(H||(H=Object(f.a)(["\n  mutation updateTechnicien(\n    $id: ID!\n    $updateTechnicienFields: UpdateTechnicienInput!\n  ) {\n    updateTechnicien(id: $id, updateTechnicienFields: $updateTechnicienFields) {\n      id\n      nom\n      prenom\n      contact\n      maintenances {\n        id\n        serie\n        status\n        detail {\n          id\n          type\n          marque\n        }\n      }\n    }\n  }\n"]))),Oe=n(10),pe=n(537),me=n(538),he=["children"];var xe=function(e){var t=e.children,n=Object(Oe.a)(e,he),i=Object(G.d)(),a=i.submitForm,r=i.isValid,c=i.isSubmitting,s=Object(B.a)(Object(B.a)({},n),{},{variant:"contained",color:"primary",onClick:function(){a()}});return Object(k.jsx)(pe.a,Object(B.a)(Object(B.a)({startIcon:c&&Object(k.jsx)(me.a,{size:"1rem"}),disabled:!r||c},s),{},{children:t}))},ve=n(595),fe=["name"];var ge=function(e){var t=e.name,n=Object(Oe.a)(e,fe),i=Object(G.c)(t),a=Object(F.a)(i,2),r=a[0],c=a[1],s=Object(B.a)(Object(B.a)({variant:"outlined",fullWidth:!0},r),n);return c&&c.error&&c.touched&&(s.error=!0,s.helperText=c.error),Object(k.jsx)(ve.a,Object(B.a)({},s))},ye=n(541),we=["name","options"];var qe=function(e){var t=e.name,n=e.options,i=Object(Oe.a)(e,we),a=G.d.setFieldValue,r=Object(G.c)(t),c=Object(F.a)(r,2),s=c[0],o=c[1],l=Object(B.a)(Object(B.a)({variant:"outlined",fullWidth:!0,select:!0,onChange:function(e){var n=e.target.value;a(t,n)}},s),i);return o&&o.error&&o.touched&&(l.error=!0,l.helperText=o.error),Object(k.jsx)(ve.a,Object(B.a)(Object(B.a)({},l),{},{children:n&&n.map((function(e){return Object(k.jsx)(ye.a,{value:e.id,children:e.value},e.id)}))}))},Se=n(35),Fe={nom:"",prenom:"",fonction:"",email:"",password:""},Ie=Se.a().shape({nom:Se.b().min(3,"Trois (03) caract\xe8res minimum").required("Le nom est vide"),prenom:Se.b().min(3,"Trois (03) caract\xe8res minimum").required("Le prenom est vide"),fonction:Se.b().required("La fonction est vide")});var Te=function(e){var t=e.initialFormState,n=e.setIsOpen,i=Object(Z.a)(ee,{update:function(e,t){var n=t.data,i=null===n||void 0===n?void 0:n.addUser,a=e.readQuery({query:y});e.writeQuery({query:y,data:{users:[].concat(Object(K.a)(null===a||void 0===a?void 0:a.users),[i])}})}}),a=Object(F.a)(i,2),r=a[0],c=a[1],s=c.loading,o=c.error,l=Object(Z.a)(te),d=Object(F.a)(l,2),j=d[0],u=d[1],b=u.loading,O=u.error;return o||O?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{style:{paddingBottom:16},children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:t?"Modification de ".concat(t.nom):"Ajout d'un nouveau utilisateur"}),Object(k.jsx)(Y.a,{})]}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},t||Fe),validationSchema:Ie,onSubmit:function(e,i){if(t){if(j({variables:{id:t.id,updateUserFields:{nom:e.nom,prenom:e.prenom,fonction:e.fonction}},refetchQueries:[{query:y}]}),b)return Object(k.jsx)(Backdrop,{loading:b});n(!1)}else{if(r({variables:{addUserFields:{nom:e.nom,prenom:e.prenom,fonction:e.fonction}}}),s)return Object(k.jsx)(Backdrop,{loading:s});n(!1)}i.resetForm()},children:Object(k.jsx)(G.a,{autoComplete:"off",children:Object(k.jsxs)(X.a,{container:!0,spacing:2,children:[Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(ge,{required:!0,label:"nom",name:"nom",autoFocus:!0})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(ge,{required:!0,label:"prenom",name:"prenom"})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(qe,{required:!0,label:"fonction",name:"fonction",options:[{id:"Chef secteur",value:"Chef secteur"},{id:"Commercial",value:"Commercial"},{id:"Monteur",value:"Monteur"},{id:"Agent de conduit",value:"Agent de conduit"},{id:"Chef d'usine",value:"Chef d'usine"},{id:"Releveur",value:"Releveur"},{id:"Comptable",value:"Comptable"}]})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(xe,{variant:"outlined",children:t?"Modifier":"Ajouter"})})]})})})]})};var Ce=function(){var e=Object(s.useState)(!1),t=Object(F.a)(e,2),n=t[0],i=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(I.a,{variant:"extended",size:"medium",color:"primary","aria-label":"add",onClick:function(){i(!0)},style:{position:"absolute",bottom:25,right:0},children:[Object(k.jsx)(T.a,{style:{marginRight:2}}),"Utilisateur"]}),Object(k.jsx)(z,{isOpen:n,setIsOpen:i,children:Object(k.jsx)(Te,{setIsOpen:i})})]})},Me=n(556),ke=n(557),Ee=n(551),Ae=n(274),Le=n(555),De=n(540),Ne=n(449),$e=n(554),Ue=n(552),Pe=n(553),We=n(448),_e=n(550);var Ve=Object(_e.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Qe=function(e){var t=e.loading,n=Ve();return Object(k.jsx)(We.a,{className:n.backdrop,open:t,children:Object(k.jsx)(me.a,{color:"inherit"})})};var Re=function(e){var t=Object(Z.a)(ce),n=Object(F.a)(t,2),i=n[0],a=n[1],r=a.loading,c=a.error;return r?Object(k.jsx)(Qe,{loading:r}):c?Object(k.jsx)("p",{children:"Error occured"}):Object(k.jsx)(Ee.a,{style:e.style,onClick:function(){return i({variables:{id:e.id,updateMaterielFields:{userId:null}}})},children:e.ilikedeleteicon?Object(k.jsx)(Ue.a,{}):Object(k.jsx)(Pe.a,{})})};var He=function(e){var t=e.user,n=void 0===t?[]:t,i=e.setIsOpen;return Object(s.useEffect)((function(){n.materiels.length<=0&&i(!1)}),[n,i]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:"Les materiels utiliser par ".concat(n.nom)}),Object(k.jsx)(Y.a,{}),Object(k.jsx)(De.a,{dense:!0,children:null===n||void 0===n?void 0:n.materiels.map((function(e,t){return Object(k.jsxs)(Ne.a,{style:{position:"relative"},children:[Object(k.jsx)(Re,{id:e.id,ilikedeleteicon:!0,style:{position:"absolute",right:0}}),Object(k.jsx)($e.a,{primary:e.serie,secondary:"".concat(e.detail.type)})]},e.serie)}))})]})};var ze=function(e){var t=e.user,n=Object(s.useState)(null),i=Object(F.a)(n,2),a=i[0],r=i[1],c=Object(s.useState)(!1),o=Object(F.a)(c,2),l=o[0],d=o[1],j=Object(s.useState)(!1),u=Object(F.a)(j,2),b=u[0],O=u[1],p=function(){r(null)},m=Boolean(a),h=Object(Z.a)(ne,{update:function(e,t){var n=t.data,i=null===n||void 0===n?void 0:n.deleteUser,a=e.readQuery({query:y});e.writeQuery({query:y,data:{users:null===a||void 0===a?void 0:a.users.filter((function(e){return e.id!==i}))}})}}),x=Object(F.a)(h,2),v=x[0],f=x[1],g=f.loading;return f.error?Object(k.jsx)("p",{children:"Error occured"}):Object(k.jsxs)("div",{style:{position:"absolute",top:4,right:4},children:[Object(k.jsx)(Ee.a,{onClick:function(e){r(e.currentTarget)},children:Object(k.jsx)(Le.a,{})}),Object(k.jsxs)(Ae.a,{id:"basic-menu",anchorEl:a,open:m,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(k.jsx)(ye.a,{onClick:function(){d(!0),p()},children:"Modifier"}),Object(k.jsx)(ye.a,{disabled:t.materiels[0]||1===t.level,onClick:function(){v({variables:{userId:t.id}})},children:g?"loading...":"Supprimer"}),Object(k.jsx)(ye.a,{disabled:!t.materiels[0],onClick:function(){O(!0),p()},children:"Voir les materiels"})]}),Object(k.jsx)(z,{isOpen:l,setIsOpen:d,children:Object(k.jsx)(Te,{initialFormState:{id:t.id,nom:t.nom,fonction:t.fonction,prenom:t.prenom},setIsOpen:d})}),Object(k.jsx)(z,{isOpen:b,setIsOpen:O,children:Object(k.jsx)(He,{user:t,setIsOpen:O})})]})};var Be=function(e){var t,n=e.user;return Object(k.jsxs)(Me.a,{variant:"outlined",style:{position:"relative",minWidth:250},children:[Object(k.jsxs)(ke.a,{children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:n.nom}),Object(k.jsx)(J.a,{variant:"subtitle2",component:"p",children:n.prenom}),Object(k.jsx)(J.a,{color:"secondary",variant:"subtitle2",component:"p",children:n.fonction}),Object(k.jsxs)(J.a,{variant:"caption",component:"p",children:["Nombre de materiel utiliser: ",null===(t=n.materiels)||void 0===t?void 0:t.length]}),1===n.level&&Object(k.jsx)("span",{style:{position:"absolute",top:0,left:0,margin:4,color:"rgba(255,0,0,0.7)",fontSize:11,fontWeight:600},children:"Admin"})]}),Object(k.jsx)(ze,{user:n})]})};var Ke=function(e){var t=e.users;return Object(k.jsx)(k.Fragment,{children:t.map((function(e,t){return Object(k.jsx)(Be,{user:e},t)}))})};var Ge=function(e){Object(s.useEffect)((function(){document.title=e}),[e])},Je=n(571),Ye=n(568),Xe=n(569),Ze=n(570),et=n(608),tt=n(558),nt=n(566),it=n(559),at=n(560),rt=n(561),ct=n(562),st=n(563),ot=n(564),lt=n(565);var dt=function(e){var t=e.open,n=e.setOpen,i=Object(x.g)(),a=Object(s.useState)(!1),r=Object(F.a)(a,2),c=r[0],o=r[1];return Object(k.jsx)(et.a,{anchor:"left",open:t,onClose:function(){return n(!1)},children:Object(k.jsxs)("div",{style:{width:250},children:[Object(k.jsx)(De.a,{children:[{name:"Materiels",path:"/"},{name:"Type de materiel",path:"detail"},{name:"Utilisateurs",path:"user"},{name:"Techniciens",path:"technicien"}].map((function(e,t){return Object(k.jsxs)(Ne.a,{button:!0,onClick:function(){i.push(e.path),n(!1)},children:[Object(k.jsxs)(tt.a,{children:[0===t&&Object(k.jsx)(it.a,{}),1===t&&Object(k.jsx)(at.a,{}),2===t&&Object(k.jsx)(rt.a,{}),3===t&&Object(k.jsx)(ct.a,{})]}),Object(k.jsx)($e.a,{primary:e.name})]},e.name)}))}),Object(k.jsx)(Y.a,{}),Object(k.jsxs)(De.a,{children:[Object(k.jsxs)(Ne.a,{button:!0,onClick:function(){o(!c)},children:[Object(k.jsx)(tt.a,{children:Object(k.jsx)(st.a,{})}),Object(k.jsx)($e.a,{primary:"Plus"}),c?Object(k.jsx)(ot.a,{}):Object(k.jsx)(lt.a,{})]}),Object(k.jsx)(nt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(k.jsx)(De.a,{component:"div",disablePadding:!0,children:[{name:"Listes des materiels",path:"listmateriel"},{name:"Listes des utilisateurs",path:"listuser"},{name:"Listes des techniciens",path:"listtechnicien"}].map((function(e,t){return Object(k.jsxs)(Ne.a,{button:!0,onClick:function(){i.push(e.path),n(!1)},children:[Object(k.jsxs)(tt.a,{children:[0===t&&Object(k.jsx)(it.a,{}),1===t&&Object(k.jsx)(rt.a,{}),2===t&&Object(k.jsx)(ct.a,{})]}),Object(k.jsx)($e.a,{primary:e.name})]},e.name)}))})})]})]})})},jt=n(24),ut=n.n(jt),bt=n(41),Ot=n(609),pt=n(567),mt=n(269),ht=n.n(mt).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:8000/",headers:{"Content-type":"application/json"}}),xt=n(270),vt=n.n(xt),ft="isLoggedIn",gt=function(){return ft in localStorage},yt=function(){var e=Object(bt.a)(ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht({method:"GET",url:"jwtid",withCredentials:!0}).then((function(e){localStorage.setItem(ft,e.data)})).catch((function(e){localStorage.removeItem(ft)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var wt=function(){var e=function(){var e=Object(bt.a)(ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht({method:"GET",url:"api/user/logout",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}).then((function(){var e;e="jwt","undefined"!==window&&vt.a.remove(e,{expires:1}),localStorage.removeItem(ft)})).catch((function(e){return console.log(e)})).finally((function(){window.location="/"}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)(Ot.a,{title:"Se d\xe9connecter",children:Object(k.jsx)(Ee.a,{onClick:e,"aria-label":"Se d\xe9connecter",children:Object(k.jsx)(pt.a,{style:{color:"white"}})})})};var qt=function(){var e=Object(s.useState)(!1),t=Object(F.a)(e,2),n=t[0],i=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Ye.a,{position:"static",children:Object(k.jsxs)(Xe.a,{children:[Object(k.jsx)(Ee.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return i(!0)},children:Object(k.jsx)(Ze.a,{})}),Object(k.jsx)(J.a,{variant:"h6",component:"div",style:{flexGrow:1},children:"G. Materiels"}),Object(k.jsx)(wt,{})]})}),Object(k.jsx)(dt,{open:n,setOpen:i})]})};var St=function(e){var t=e.children;return Object(k.jsxs)("div",{style:{backgroundColor:"#f1f1f1",height:"100vh",overflowY:"auto"},children:[Object(k.jsx)(qt,{}),Object(k.jsx)("div",{style:{height:"calc(100vh - 64px)",overflow:"auto"},children:Object(k.jsx)(Je.a,{component:"main",style:{height:"inherit"},children:t})})]})};var Ft=function(){Ge("Utilisateurs");var e=Object(v.a)(y),t=e.error,n=e.loading,i=e.data;return Object(k.jsx)(St,{children:Object(k.jsx)("div",{style:{paddingTop:24,position:"relative",height:"inherit"},children:Object(k.jsxs)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:[n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(Ke,{users:i.users}),Object(k.jsx)(Ce,{})]})})})},It={type:"",marque:""},Tt=Se.a().shape({type:Se.b().required("Le type du materiel est vide"),marque:Se.b().required("Le marque est vide")});var Ct=function(e){var t=e.initialFormState,n=e.setIsOpen,i=Object(Z.a)(oe,{update:function(e,t){var n=t.data,i=null===n||void 0===n?void 0:n.addDetail,a=e.readQuery({query:q});e.writeQuery({query:q,data:{details:[].concat(Object(K.a)(null===a||void 0===a?void 0:a.details),[i])}})}}),a=Object(F.a)(i,2),r=a[0],c=a[1],s=c.loading,o=c.error,l=Object(Z.a)(de),d=Object(F.a)(l,2),j=d[0],u=d[1],b=u.loading,O=u.error;return o||O?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{style:{paddingBottom:16},children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:t?"Modification de ".concat(t.type):"Ajout d'un nouveau type de materiel"}),Object(k.jsx)(Y.a,{})]}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},t||It),validationSchema:Tt,onSubmit:function(e,i){if(t){if(j({variables:{id:t.id,updateMaterielFields:{type:e.type,marque:e.marque}},refetchQueries:[{query:q}]}),b)return Object(k.jsx)(Qe,{loading:b});n(!1)}else{if(r({variables:{addDetailFields:{type:e.type,marque:e.marque}}}),s)return Object(k.jsx)(Qe,{loading:s});n(!1)}i.resetForm()},children:Object(k.jsx)(G.a,{autoComplete:"off",children:Object(k.jsxs)(X.a,{container:!0,spacing:2,children:[Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(ge,{required:!0,label:"type",name:"type",autoFocus:!0})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(ge,{required:!0,label:"marque",name:"marque"})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(xe,{variant:"outlined",children:t?"Modifier":"Ajouter"})})]})})})]})};var Mt=function(){var e=Object(s.useState)(!1),t=Object(F.a)(e,2),n=t[0],i=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(I.a,{variant:"extended",size:"medium",color:"primary","aria-label":"add",onClick:function(){i(!0)},style:{position:"absolute",bottom:25,right:0},children:[Object(k.jsx)(T.a,{style:{marginRight:2}}),"Type de materiel"]}),Object(k.jsx)(z,{isOpen:n,setIsOpen:i,children:Object(k.jsx)(Ct,{setIsOpen:i})})]})},kt=n(572);var Et=function(e){var t=e.detail,n=void 0===t?[]:t,i=e.setIsOpen;return Object(s.useEffect)((function(){n.materiels.length<=0&&i(!1)}),[n,i]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:"Les listes des ".concat(n.type,"(s) : ")}),Object(k.jsx)(Y.a,{}),Object(k.jsx)(De.a,{dense:!0,children:null===n||void 0===n?void 0:n.materiels.map((function(e,t){return Object(k.jsxs)(Ne.a,{style:{position:"relative"},children:[Object(k.jsx)(kt.a,{}),Object(k.jsx)($e.a,{style:{paddingLeft:8},primary:e.serie})]},e.serie)}))})]})};var At=function(e){var t=e.detail,n=Object(s.useState)(null),i=Object(F.a)(n,2),a=i[0],r=i[1],c=Object(s.useState)(!1),o=Object(F.a)(c,2),l=o[0],d=o[1],j=Object(s.useState)(!1),u=Object(F.a)(j,2),b=u[0],O=u[1],p=function(){r(null)},m=Boolean(a),h=Object(Z.a)(le),x=Object(F.a)(h,2),v=x[0],f=x[1],g=f.loading;return f.error?Object(k.jsx)("p",{children:"Error occured"}):Object(k.jsxs)("div",{style:{position:"absolute",top:4,right:4},children:[Object(k.jsx)(Ee.a,{onClick:function(e){r(e.currentTarget)},children:Object(k.jsx)(Le.a,{})}),Object(k.jsxs)(Ae.a,{id:"basic-menu",anchorEl:a,open:m,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(k.jsx)(ye.a,{onClick:function(){d(!0),p()},children:"Modifier"}),Object(k.jsx)(ye.a,{disabled:t.materiels[0],onClick:function(){v({variables:{id:t.id},refetchQueries:[{query:q}]})},children:g?"loading...":"Supprimer"}),Object(k.jsx)(ye.a,{disabled:!t.materiels[0],onClick:function(){O(!0),p()},children:"Voir les materiels"})]}),Object(k.jsx)(z,{isOpen:l,setIsOpen:d,children:Object(k.jsx)(Ct,{initialFormState:{id:t.id,type:t.type,marque:t.marque},setIsOpen:d})}),Object(k.jsx)(z,{isOpen:b,setIsOpen:O,children:Object(k.jsx)(Et,{detail:t,setIsOpen:O})})]})};var Lt=function(e){var t,n=e.detail;return Object(k.jsxs)(Me.a,{variant:"outlined",style:{position:"relative",minWidth:250},children:[Object(k.jsxs)(ke.a,{children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:n.type}),Object(k.jsx)(J.a,{variant:"subtitle2",component:"p",children:n.marque}),Object(k.jsxs)(J.a,{variant:"caption",component:"p",children:["Nombre de materiel: ",null===(t=n.materiels)||void 0===t?void 0:t.length]})]}),Object(k.jsx)(At,{detail:n})]})};var Dt=function(e){var t=e.details;return Object(k.jsx)(k.Fragment,{children:t.map((function(e,t){return Object(k.jsx)(Lt,{detail:e},t)}))})};var Nt=function(){Ge("Type de materiel");var e=Object(v.a)(q),t=e.error,n=e.loading,i=e.data;return Object(k.jsx)(St,{children:Object(k.jsx)("div",{style:{paddingTop:24,position:"relative",height:"inherit"},children:Object(k.jsxs)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:[n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(Dt,{details:i.details}),Object(k.jsx)(Mt,{})]})})})},$t={serie:"",detailId:""},Ut=Se.a().shape({serie:Se.b().min(3,"Trois (03) caract\xe8res minimum").required("Le serie du materiel est vide"),detailId:Se.b().min(3,"Trois (03) caract\xe8res minimum").required("Le type du materiel est vide")}),Pt={userId:""},Wt=Se.a().shape({userId:Se.b().required("Le utilisateur est vide")}),_t={technicienId:""},Vt=Se.a().shape({technicienId:Se.b().required("Le technicien est vide")});var Qt=function(){var e=Object(v.a)(q),t=e.loading,n=e.data,i=Object(Z.a)(ie,{update:function(e,t){var n=t.data,i=null===n||void 0===n?void 0:n.addMateriel,a=e.readQuery({query:w});e.writeQuery({query:w,data:{materiels:[].concat(Object(K.a)(null===a||void 0===a?void 0:a.materiels),[i])}})}}),a=Object(F.a)(i,2),r=a[0],c=a[1],s=c.loading,o=c.error,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e[0])return e.map((function(e){return{id:e.id,value:e.type}}))}(null===n||void 0===n?void 0:n.details);return s?Object(k.jsx)(Qe,{loading:t}):o?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(J.a,{variant:"h6",children:"Ajout d'un nouveau materiel"}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},$t),validationSchema:Ut,onSubmit:function(e,t){r({variables:{addMaterielFields:{serie:e.serie,detailId:e.detailId}},refetchQueries:[{query:q}]}),t.resetForm()},children:Object(k.jsx)(G.a,{autoComplete:"off",children:Object(k.jsxs)(X.a,{container:!0,spacing:2,children:[Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(ge,{required:!0,label:"serie",name:"serie",autoFocus:!0})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(qe,{required:!0,label:"type",name:"detailId",options:t?[{id:null,value:"loading..."}]:l})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(xe,{variant:"outlined",children:"Ajouter"})})]})})})]})};var Rt=function(){var e=Object(s.useState)(!1),t=Object(F.a)(e,2),n=t[0],i=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(I.a,{variant:"extended",size:"medium",color:"primary","aria-label":"add",onClick:function(){i(!0)},style:{position:"absolute",bottom:25,right:0},children:[Object(k.jsx)(T.a,{style:{marginRight:2}}),"Materiel"]}),Object(k.jsx)(z,{isOpen:n,setIsOpen:i,children:Object(k.jsx)(Qt,{})})]})},Ht=n(576);var zt=function(e){var t=Object(Z.a)(ae,{update:function(e,t){var n=t.data,i=null===n||void 0===n?void 0:n.deleteMateriel,a=e.readQuery({query:w});e.writeQuery({query:w,data:{materiels:null===a||void 0===a?void 0:a.materiels.filter((function(e){return e.id!==i}))}})}}),n=Object(F.a)(t,2),i=n[0],a=n[1],r=a.loading,c=a.error;return r?Object(k.jsx)(Qe,{loading:r}):c?Object(k.jsx)("p",{children:"Error occured"}):Object(k.jsx)(Ee.a,{onClick:function(){return i({variables:{id:e.id},refetchQueries:[{query:q}]})},children:Object(k.jsx)(Ue.a,{})})},Bt=n(573);var Kt=function(e){var t=e.materiel,n=Object(s.useState)(!1),i=Object(F.a)(n,2),a=i[0],r=i[1],c=Object(v.a)(y),o=c.loading,l=c.data,d=Object(Z.a)(se),j=Object(F.a)(d,2),u=j[0],b=j[1],O=b.loading,p=b.error,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e[0])return e.map((function(e){return{id:e.id,value:"".concat(e.nom," ").concat(e.prenom)}}))}(null===l||void 0===l?void 0:l.users);return O?Object(k.jsx)(Qe,{loading:O}):p?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Ee.a,{onClick:function(){r(!0)},children:Object(k.jsx)(Bt.a,{})}),Object(k.jsxs)(z,{isOpen:a,setIsOpen:r,children:[Object(k.jsxs)(J.a,{variant:"h6",children:["Donner ",t.serie," \xe0 :"]}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},Pt),validationSchema:Wt,onSubmit:function(e,n){u({variables:{id:t.id,updateMaterielFields:{userId:e.userId}},refetchQueries:[{query:w},{query:y}]}),n.resetForm(),r(!1)},children:Object(k.jsx)(G.a,{autoComplete:"off",children:Object(k.jsxs)(X.a,{container:!0,spacing:2,children:[Object(k.jsx)(X.a,{item:!0,xs:12,children:Object(k.jsx)(qe,{required:!0,label:"utilisateur",name:"userId",options:o?[{id:null,value:"loading..."}]:m,autoFocus:!0})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(xe,{variant:"outlined",children:"OK"})})]})})})]})]})},Gt=n(574),Jt=["materiel"];var Yt=function(e){var t=e.materiel,n=Object(Oe.a)(e,Jt),i=Object(Z.a)(ce),a=Object(F.a)(i,2),r=a[0],c=a[1],s=c.loading,o=c.error;return s?Object(k.jsx)(Qe,{loading:s}):o?Object(k.jsx)("p",{children:"Error occured"}):Object(k.jsx)(Ee.a,{style:n.style,onClick:function(){return r({variables:{id:t.id,updateMaterielFields:{status:"en marche",technicienId:null}},refetchQueries:[{query:w},{query:S}]})},children:Object(k.jsx)(Gt.a,{})})},Xt=n(575);var Zt=function(e){var t=e.materiel,n=Object(s.useState)(!1),i=Object(F.a)(n,2),a=i[0],r=i[1],c=Object(v.a)(S),o=c.loading,l=c.data,d=Object(Z.a)(re),j=Object(F.a)(d,2),u=j[0],b=j[1],O=b.loading,p=b.error,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e[0])return e.map((function(e){return{id:e.id,value:"".concat(e.nom," ").concat(e.prenom)}}))}(null===l||void 0===l?void 0:l.techniciens);return O?Object(k.jsx)(Qe,{loading:O}):p?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Ee.a,{onClick:function(){r(!0)},children:Object(k.jsx)(Xt.a,{})}),Object(k.jsxs)(z,{isOpen:a,setIsOpen:r,children:[Object(k.jsxs)(J.a,{variant:"h6",children:["Confier ",t.serie," \xe0 :"]}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},_t),validationSchema:Vt,onSubmit:function(e,n){u({variables:{id:t.id,updateMaterielFields:{status:"en panne",technicienId:e.technicienId}},refetchQueries:[{query:w},{query:S}]}),n.resetForm(),r(!1)},children:Object(k.jsx)(G.a,{autoComplete:"off",children:Object(k.jsxs)(X.a,{container:!0,spacing:2,children:[Object(k.jsx)(X.a,{item:!0,xs:12,children:Object(k.jsx)(qe,{required:!0,label:"technicien",name:"technicienId",options:o?[{id:null,value:"loading..."}]:m,autoFocus:!0})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(xe,{variant:"outlined",children:"OK"})})]})})})]})]})};var en=function(e){var t=e.materiel;return Object(k.jsxs)(Me.a,{variant:"outlined",style:{position:"relative",minWidth:250},children:[Object(k.jsxs)(ke.a,{children:[Object(k.jsx)(J.a,{variant:"h6",children:t.serie}),Object(k.jsxs)(J.a,{variant:"caption",component:"p",children:["Type: ",t.detail.type]}),Object(k.jsxs)(J.a,{variant:"caption",component:"p",children:["Marque: ",t.detail.marque]}),t.user&&Object(k.jsxs)(J.a,{variant:"caption",component:"p",children:["User: ",t.user.nom," ",t.user.prenom]}),t.technicien&&Object(k.jsxs)(J.a,{variant:"caption",component:"p",children:["Technicien: ",t.technicien.nom," ",t.technicien.prenom]})]}),Object(k.jsxs)(Ht.a,{children:[t.user?Object(k.jsx)(Re,{id:t.id}):Object(k.jsxs)(k.Fragment,{children:["EN_PANNE"!==t.status&&Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(Kt,{materiel:t})}),null===t.technicien?Object(k.jsx)(Zt,{materiel:t}):Object(k.jsx)(Yt,{materiel:t})]}),t.user?null:Object(k.jsx)(zt,{id:t.id})]})]})};var tn=function(e){var t=e.materiels,n=e.isLibre,i=void 0===n||n,a=e.isEnPanne,r=void 0!==a&&a,c=t.filter((function(e){return null===e.user&&"EN_MARCHE"===e.status})),s=t.filter((function(e){return null!==e.user&&"EN_MARCHE"===e.status})),o=t.filter((function(e){return"EN_PANNE"===e.status})),l=r?o:i?c:s;return Object(k.jsx)(k.Fragment,{children:l.map((function(e,t){return Object(k.jsx)(en,{materiel:e},t)}))})},nn=n(600),an=n(577),rn=["children","value","index"];var cn=function(e){var t=e.children,n=e.value,i=e.index,a=Object(Oe.a)(e,rn);return Object(k.jsx)("div",Object(B.a)(Object(B.a)({role:"tabpanel",hidden:n!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i)},a),{},{children:n===i&&Object(k.jsx)("div",{children:t})}))};var sn=function(){Ge("Materiels");var e=Object(v.a)(w),t=e.error,n=e.loading,i=e.data,a=Object(s.useState)(0),r=Object(F.a)(a,2),c=r[0],o=r[1];return Object(k.jsx)(St,{children:Object(k.jsxs)("div",{style:{paddingTop:24,position:"relative",height:"inherit"},children:[Object(k.jsxs)(nn.a,{value:c,onChange:function(e,t){o(t)},variant:"scrollable",scrollButtons:"auto","aria-label":"materiels tabs",style:{position:"sticky",top:12,zIndex:1,backgroundColor:"#f1f1f1"},children:[Object(k.jsx)(an.a,{label:"Materiel Libre"}),Object(k.jsx)(an.a,{label:"Materiel Occuper"}),Object(k.jsx)(an.a,{label:"Materiel en panne"})]}),Object(k.jsx)(cn,{value:c,index:0,children:Object(k.jsx)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(tn,{materiels:i.materiels}),Object(k.jsx)(Rt,{})]})})}),Object(k.jsx)(cn,{value:c,index:1,children:Object(k.jsx)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(tn,{materiels:i.materiels,isLibre:!1})})})}),Object(k.jsx)(cn,{value:c,index:2,children:Object(k.jsx)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(tn,{materiels:i.materiels,isEnPanne:!0})})})})]})})},on=n(610),ln=n(177),dn=n.n(ln),jn=n(606),un=n(578),bn=n(601),On=n(579);var pn=function(e){var t=e.open,n=e.setOpen,i=e.setTextHelper,a=e.severity,r=e.alertTitle,c=e.alertMessage,s=function(e,t){"clickaway"!==t&&(n(!1),i(null))};return Object(k.jsx)(Je.a,{children:Object(k.jsx)(jn.a,{open:t,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:1e4,onClose:s,action:Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(Ee.a,{size:"small","aria-label":"close",color:"inherit",onClick:s,children:Object(k.jsx)(un.a,{fontSize:"small"})})}),children:Object(k.jsxs)(bn.a,{severity:a,children:[Object(k.jsx)(On.a,{children:r}),c]})})})},mn=n(580),hn=n(583),xn=n(581),vn=n(582);function fn(e){var t=e.setIsLoggin,n=Object(s.useState)(!1),i=Object(F.a)(n,2),a=i[0],r=i[1],c=Object(s.useState)(!1),o=Object(F.a)(c,2),l=o[0],d=o[1],j=Object(s.useState)(""),u=Object(F.a)(j,2),b=u[0],O=u[1],p=Object(s.useState)(""),m=Object(F.a)(p,2),h=m[0],v=m[1],f=Object(s.useState)(!1),g=Object(F.a)(f,2),y=g[0],w=g[1],q=gn(),S=Object(x.g)(),I=Se.a().shape({email:Se.b().email("Email invalide").required("Veuiller saisir votre email"),password:Se.b().required("Veuiller saisir votre mot de passe")}),T=function(e){return new Promise((function(t){return setTimeout(t,e)}))},C=function(){var e=Object(bt.a)(ut.a.mark((function e(t){var n,i;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(3e3);case 2:n=t.email,i=t.password,ht({method:"POST",url:"api/user/login",data:{email:n,password:i},withCredentials:!0}).then(function(){var e=Object(bt.a)(ut.a.mark((function e(t){var n,i,a;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.errors){e.next=6;break}n=t.data.errors,i=n.email,a=n.password,i&&(r(!0),O(i)),a&&(d(!0),v(a)),e.next=9;break;case 6:return e.next=8,yt();case 8:S.push("/");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(Je.a,{component:"main",maxWidth:"xs",children:[Object(k.jsxs)("div",{className:q.paper,children:[Object(k.jsx)(on.a,{className:q.avatar,children:Object(k.jsx)(dn.a,{})}),Object(k.jsx)(J.a,{component:"h1",variant:"h5",children:"Se connecter"}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},{email:"",password:""}),validationSchema:I,onSubmit:C,children:Object(k.jsxs)(G.a,{autoComplete:"off",className:q.form,children:[Object(k.jsx)(ge,{margin:"normal",required:!0,label:"Votre email",name:"email",autoFocus:!0,error:a,helperText:b}),Object(k.jsx)(ge,{InputProps:{endAdornment:Object(k.jsx)(mn.a,{position:"start",children:Object(k.jsx)(Ee.a,{"aria-label":"toggle password visibility",onClick:function(){w(!y)},onMouseDown:function(e){e.preventDefault()},children:y?Object(k.jsx)(xn.a,{}):Object(k.jsx)(vn.a,{})})})},margin:"normal",required:!0,name:"password",label:"Votre mot de passe",type:y?"text":"password",error:l,helperText:h}),Object(k.jsx)(hn.a,{onClick:function(){return t(!1)},color:"textPrimary",children:"Je n'ai pas un compte. Cr\xe9er un compte?"}),Object(k.jsx)(xe,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:q.submit,children:"Se connecter"})]})})]}),Object(k.jsx)(pn,{open:a,setOpen:r,setTextHelper:O,severity:"error",alertTitle:"Email inconnu",alertMessage:b}),Object(k.jsx)(pn,{open:l,setOpen:d,setTextHelper:v,severity:"error",alertTitle:"Mot de passe incorect",alertMessage:h})]})}var gn=Object(_e.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function yn(e){var t=e.setIsLoggin,n=Object(s.useState)(!1),i=Object(F.a)(n,2),a=i[0],r=i[1],c=Object(s.useState)(!1),o=Object(F.a)(c,2),l=o[0],d=o[1],j=Object(s.useState)(""),u=Object(F.a)(j,2),b=u[0],O=u[1],p=Object(s.useState)(""),m=Object(F.a)(p,2),h=m[0],v=m[1],f=Object(s.useState)(!1),g=Object(F.a)(f,2),y=g[0],w=g[1],q=Object(s.useState)(!1),S=Object(F.a)(q,2),I=S[0],T=S[1],C=Object(s.useState)(""),M=Object(F.a)(C,2),E=M[0],A=M[1],L=Object(s.useState)(""),D=Object(F.a)(L,2),N=D[0],$=D[1],U=Object(s.useState)(!1),P=Object(F.a)(U,2),W=P[0],_=P[1],V=wn(),Q=Object(x.g)(),R=Se.a().shape({email:Se.b().email("Email invalide").required("Veuiller saisir votre email"),password:Se.b().required("Veuiller saisir votre mot de passe"),nom:Se.b().min(2,"Aux moin 2 caract\xe8res").required("Veuiller saisir votre nom"),prenom:Se.b().min(2,"Aux moin 2 caract\xe8res").required("Veuiller saisir votre prenom")}),H=function(e){return new Promise((function(t){return setTimeout(t,e)}))},z=function(){var e=Object(bt.a)(ut.a.mark((function e(t){var n,i,a,c;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(3e3);case 2:n=t.email,i=t.password,a=t.nom,c=t.prenom,ht({method:"POST",url:"api/user/register",data:{email:n,password:i,nom:a,prenom:c,level:1},withCredentials:!0}).then(function(){var e=Object(bt.a)(ut.a.mark((function e(t){var n,i,a,c,s;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.errors){e.next=8;break}n=t.data.errors,i=n.email,a=n.password,c=n.nom,s=n.prenom,i&&(r(!0),O(i)),a&&(d(!0),v(a)),c&&(w(!0),A(c)),s&&(T(!0),$(s)),e.next=11;break;case 8:return e.next=10,yt();case 10:Q.push("/");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(Je.a,{component:"main",maxWidth:"xs",children:[Object(k.jsxs)("div",{className:V.paper,children:[Object(k.jsx)(on.a,{className:V.avatar,children:Object(k.jsx)(dn.a,{})}),Object(k.jsx)(J.a,{component:"h1",variant:"h5",children:"S'inscrire"}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},{email:"",password:"",nom:"",prenom:""}),validationSchema:R,onSubmit:z,children:Object(k.jsxs)(G.a,{autoComplete:"off",className:V.form,children:[Object(k.jsx)(ge,{margin:"normal",required:!0,label:"Votre nom",name:"nom",autoFocus:!0,error:y,helperText:E}),Object(k.jsx)(ge,{margin:"normal",required:!0,label:"Votre prenom",name:"prenom",error:I,helperText:N}),Object(k.jsx)(ge,{margin:"normal",required:!0,label:"Votre email",name:"email",error:a,helperText:b}),Object(k.jsx)(ge,{InputProps:{endAdornment:Object(k.jsx)(mn.a,{position:"start",children:Object(k.jsx)(Ee.a,{"aria-label":"toggle password visibility",onClick:function(){_(!W)},onMouseDown:function(e){e.preventDefault()},children:W?Object(k.jsx)(xn.a,{}):Object(k.jsx)(vn.a,{})})})},margin:"normal",required:!0,name:"password",label:"Votre mot de passe",type:W?"text":"password",error:l,helperText:h}),Object(k.jsx)(hn.a,{onClick:function(){return t(!0)},color:"textPrimary",children:"Je ai d\xe9j\xe0 un compte. Se connecter?"}),Object(k.jsx)(xe,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:V.submit,children:"S'inscrire"})]})})]}),Object(k.jsx)(pn,{open:a,setOpen:r,setTextHelper:O,severity:"error",alertTitle:"Email inconnu",alertMessage:b}),Object(k.jsx)(pn,{open:l,setOpen:d,setTextHelper:v,severity:"error",alertTitle:"Mot de passe incorect",alertMessage:h})]})}var wn=Object(_e.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function qn(e){var t=e.isLoggin,n=e.setIsLoggin;return Object(k.jsx)(k.Fragment,{children:t?Object(k.jsx)(fn,{setIsLoggin:n}):Object(k.jsx)(yn,{setIsLoggin:n})})}var Sn=function(){Ge("Application gestion des materiels");var e=Object(s.useState)(!0),t=Object(F.a)(e,2),n=t[0],i=t[1];return Object(k.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",height:"100vh"},children:[Object(k.jsx)(qn,{isLoggin:n,setIsLoggin:i}),Object(k.jsx)("span",{style:{position:"absolute",bottom:"1em"},children:"Copyright \xa9 Fanomezantsoa Herifiandry Marc Nico"})]})},Fn={nom:"",prenom:"",contact:""},In=Se.a().shape({nom:Se.b().min(3,"Trois (03) caract\xe8res minimum").required("Le nom est vide"),prenom:Se.b().min(3,"Trois (03) caract\xe8res minimum").required("Le prenom est vide"),contact:Se.b().required("Le contact est vide")});var Tn=function(e){var t=e.initialFormState,n=e.setIsOpen,i=Object(Z.a)(je),a=Object(F.a)(i,2),r=a[0],c=a[1],s=c.loading,o=c.error,l=Object(Z.a)(be),d=Object(F.a)(l,2),j=d[0],u=d[1],b=u.loading,O=u.error;return o||O?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{style:{paddingBottom:16},children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:t?"Modification de ".concat(t.nom):"Ajout d'un nouveau technicien"}),Object(k.jsx)(Y.a,{})]}),Object(k.jsx)(G.b,{initialValues:Object(B.a)({},t||Fn),validationSchema:In,onSubmit:function(e,i){if(t){if(j({variables:{id:t.id,updateTechnicienFields:{nom:e.nom,prenom:e.prenom,contact:e.contact}},refetchQueries:[{query:S}]}),b)return Object(k.jsx)(Qe,{loading:b});n(!1)}else{if(r({variables:{addTechnicienFields:{nom:e.nom,prenom:e.prenom,contact:e.contact}},refetchQueries:[{query:S}]}),s)return Object(k.jsx)(Qe,{loading:s});n(!1)}i.resetForm()},children:Object(k.jsx)(G.a,{autoComplete:"off",children:Object(k.jsxs)(X.a,{container:!0,spacing:2,children:[Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(ge,{required:!0,label:"nom",name:"nom",autoFocus:!0})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(k.jsx)(ge,{required:!0,label:"prenom",name:"prenom"})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(ge,{required:!0,label:"contact",name:"contact"})}),Object(k.jsx)(X.a,{item:!0,xs:12,sm:12,children:Object(k.jsx)(xe,{variant:"outlined",children:t?"Modifier":"Ajouter"})})]})})})]})};var Cn=function(){var e=Object(s.useState)(!1),t=Object(F.a)(e,2),n=t[0],i=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(I.a,{variant:"extended",size:"medium",color:"primary","aria-label":"add",onClick:function(){i(!0)},style:{position:"absolute",bottom:25,right:0},children:[Object(k.jsx)(T.a,{style:{marginRight:2}}),"Technicien"]}),Object(k.jsx)(z,{isOpen:n,setIsOpen:i,children:Object(k.jsx)(Tn,{setIsOpen:i})})]})};var Mn=function(e){var t=e.technicien,n=void 0===t?[]:t,i=e.setIsOpen;return Object(s.useEffect)((function(){n.maintenances.length<=0&&i(!1)}),[n,i]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:"Les materiels maintener par ".concat(n.nom)}),Object(k.jsx)(Y.a,{}),Object(k.jsx)(De.a,{dense:!0,children:null===n||void 0===n?void 0:n.maintenances.map((function(e,t){return Object(k.jsxs)(Ne.a,{style:{position:"relative"},children:[Object(k.jsx)(Yt,{materiel:e,style:{position:"absolute",right:0}}),Object(k.jsx)($e.a,{primary:e.serie,secondary:"".concat(e.detail.type)})]},e.serie)}))})]})};var kn=function(e){var t=e.technicien,n=Object(s.useState)(null),i=Object(F.a)(n,2),a=i[0],r=i[1],c=Object(s.useState)(!1),o=Object(F.a)(c,2),l=o[0],d=o[1],j=Object(s.useState)(!1),u=Object(F.a)(j,2),b=u[0],O=u[1],p=function(){r(null)},m=Boolean(a),h=Object(Z.a)(ue,{update:function(e,t){var n=t.data,i=null===n||void 0===n?void 0:n.deleteTechnicien,a=e.readQuery({query:S});e.writeQuery({query:S,data:{techniciens:null===a||void 0===a?void 0:a.techniciens.filter((function(e){return e.id!==i}))}})}}),x=Object(F.a)(h,2),v=x[0],f=x[1],g=f.loading;return f.error?Object(k.jsx)("p",{children:"Error occured"}):Object(k.jsxs)("div",{style:{position:"absolute",top:4,right:4},children:[Object(k.jsx)(Ee.a,{onClick:function(e){r(e.currentTarget)},children:Object(k.jsx)(Le.a,{})}),Object(k.jsxs)(Ae.a,{id:"basic-menu",anchorEl:a,open:m,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(k.jsx)(ye.a,{onClick:function(){d(!0),p()},children:"Modifier"}),Object(k.jsx)(ye.a,{disabled:t.maintenances[0],onClick:function(){v({variables:{id:t.id}})},children:g?"loading...":"Supprimer"}),Object(k.jsx)(ye.a,{disabled:!t.maintenances[0],onClick:function(){O(!0),p()},children:"Voir les materiels"})]}),Object(k.jsx)(z,{isOpen:l,setIsOpen:d,children:Object(k.jsx)(Tn,{initialFormState:{id:t.id,nom:t.nom,contact:t.contact,prenom:t.prenom},setIsOpen:d})}),Object(k.jsx)(z,{isOpen:b,setIsOpen:O,children:Object(k.jsx)(Mn,{technicien:t,setIsOpen:O})})]})};var En=function(e){var t,n=e.technicien;return Object(k.jsxs)(Me.a,{variant:"outlined",style:{position:"relative",minWidth:250},children:[Object(k.jsxs)(ke.a,{children:[Object(k.jsx)(J.a,{variant:"subtitle1",children:n.nom}),Object(k.jsx)(J.a,{variant:"subtitle2",component:"p",children:n.prenom}),Object(k.jsx)(J.a,{color:"secondary",variant:"subtitle2",component:"p",children:n.contact}),Object(k.jsxs)(J.a,{variant:"caption",component:"p",children:["Nombre de materiel reparer: ",null===(t=n.maintenances)||void 0===t?void 0:t.length]})]}),Object(k.jsx)(kn,{technicien:n})]})};var An=function(e){var t=e.techniciens;return Object(k.jsx)(k.Fragment,{children:t.map((function(e,t){return Object(k.jsx)(En,{technicien:e},t)}))})};var Ln=function(){Ge("Techniciens");var e=Object(v.a)(S),t=e.error,n=e.loading,i=e.data;return Object(k.jsx)(St,{children:Object(k.jsx)("div",{style:{paddingTop:24,position:"relative",height:"inherit"},children:Object(k.jsxs)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:[n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(An,{techniciens:i.techniciens}),Object(k.jsx)(Cn,{})]})})})},Dn=n(213),Nn=n(584);var $n=Object(_e.a)((function(e){return{root:{color:e.palette.primary.main,fontWeight:600,textDecoration:"none"}}})),Un=function(){var e=$n();return Ge("Page introuvable"),Object(k.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",height:"100vh"},children:Object(k.jsxs)(Dn.a,{variant:"outlined",style:{maxHeight:200,maxWidth:400,padding:24,display:"flex",flexDirection:"column",gap:8},children:[Object(k.jsx)(J.a,{variant:"h5",children:" Page introuvable"}),Object(k.jsx)("p",{children:"D\xe9sol\xe9,le lien que vous avez demand\xe9 n'exist pas dans notre application."}),Object(k.jsxs)("p",{style:{display:"flex",alignItems:"center"},children:[Object(k.jsx)(Nn.a,{color:"primary"}),Object(k.jsx)(h.b,{to:"/",className:e.root,children:"Retourner \xe0 la page d'acceuil"})]})]})})},Pn=n(594),Wn=n(590),_n=n(613),Vn=["rows","columns"];function Qn(){return Object(k.jsx)(Wn.a,{children:Object(k.jsx)(_n.a,{})})}var Rn=function(e){var t=e.rows,n=e.columns,i=Object(Oe.a)(e,Vn);return Object(k.jsx)(Pn.a,Object(B.a)({autoPageSize:!0,pagination:!0,density:"compact",rows:t,columns:n,components:{Toolbar:Qn}},i))};var Hn=function(){Ge("Listes des utilisateurs");var e=Object(v.a)(y),t=e.error,n=e.loading,i=e.data,a=null===i||void 0===i?void 0:i.users;return n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(St,{children:Object(k.jsx)("div",{style:{paddingTop:24,position:"relative",height:"inherit"},children:Object(k.jsx)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:Object(k.jsx)("div",{style:{height:350,width:"100%"},children:Object(k.jsx)(Rn,{columns:[{field:"nom",headerName:"Nom",width:250},{field:"prenom",headerName:"Pr\xe9nom",width:250},{field:"fonction",headerName:"Fonction",width:150},{field:"email",headerName:"Email",width:250}],rows:a})})})})})};var zn=function(){Ge("Listes des materiels");var e=Object(v.a)(w),t=e.error,n=e.loading,i=e.data,a=null===i||void 0===i?void 0:i.materiels.map((function(e){var t,n,i,a;return{id:e.id,serie:e.serie,type:e.detail?e.detail.type:null,marque:e.detail?e.detail.marque:null,status:e.status,user:e.user?"".concat(null===(t=e.user)||void 0===t?void 0:t.nom," ").concat(null===(n=e.user)||void 0===n?void 0:n.prenom):null,technicien:e.technicien?"".concat(null===(i=e.technicien)||void 0===i?void 0:i.nom," ").concat(null===(a=e.technicien)||void 0===a?void 0:a.prenom):null}}));return n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(St,{children:Object(k.jsx)("div",{style:{paddingTop:24,position:"relative",height:"inherit"},children:Object(k.jsx)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:Object(k.jsx)("div",{style:{height:350,width:"100%"},children:Object(k.jsx)(Rn,{columns:[{field:"serie",headerName:"Serie",width:150},{field:"type",headerName:"Type",width:150},{field:"marque",headerName:"Marque",width:150},{field:"status",headerName:"Status",width:150},{field:"user",headerName:"Utitisateur",width:250},{field:"technicien",headerName:"Technicien",width:250}],rows:a})})})})})};var Bn=function(){Ge("Listes des techniciens");var e=Object(v.a)(S),t=e.error,n=e.loading,i=e.data,a=null===i||void 0===i?void 0:i.techniciens;return n?Object(k.jsx)(Qe,{loading:n}):t?Object(k.jsx)("p",{children:"An error occured"}):Object(k.jsx)(St,{children:Object(k.jsx)("div",{style:{paddingTop:24,position:"relative",height:"inherit"},children:Object(k.jsx)("div",{style:{display:"flex",gap:8,padding:"24px 0",flexWrap:"wrap"},children:Object(k.jsx)("div",{style:{height:350,width:"100%"},children:Object(k.jsx)(Rn,{columns:[{field:"nom",headerName:"Nom",width:250},{field:"prenom",headerName:"Pr\xe9nom",width:150},{field:"contact",headerName:"Contact",width:150}],rows:a})})})})})},Kn=["allowed","redirectTo","component","render","children"],Gn=function(e){var t=e.allowed,n=e.redirectTo,i=e.component,a=e.render,r=e.children,c=Object(Oe.a)(e,Kn);return Object(k.jsx)(x.b,Object(B.a)(Object(B.a)({},c),{},{render:function(e){return t?i?Object(k.jsx)(i,Object(B.a)({},e)):a?a(e):r:Object(k.jsx)(x.a,{to:n})}}))},Jn=function(e){return Object(k.jsx)(Gn,Object(B.a)(Object(B.a)({},e),{},{allowed:gt(),redirectTo:"/auth"}))},Yn=function(e){return Object(k.jsx)(Gn,Object(B.a)(Object(B.a)({},e),{},{allowed:!gt(),redirectTo:"/"}))};var Xn=function(){return Object(k.jsx)(h.a,{children:Object(k.jsxs)(x.d,{children:[Object(k.jsx)(Jn,{path:"/",exact:!0,component:sn}),Object(k.jsx)(Jn,{path:"/detail",component:Nt}),Object(k.jsx)(Jn,{path:"/user",component:Ft}),Object(k.jsx)(Jn,{path:"/technicien",component:Ln}),Object(k.jsx)(Jn,{path:"/listuser",component:Hn}),Object(k.jsx)(Jn,{path:"/listmateriel",component:zn}),Object(k.jsx)(Jn,{path:"/listtechnicien",component:Bn}),Object(k.jsx)(Yn,{path:"/auth",component:Sn}),Object(k.jsx)(x.b,{path:"/oops",component:Un}),Object(k.jsx)(x.a,{to:"/oops"})]})})},Zn=n(593),ei=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,ti=new j.a({uri:ei?"".concat(ei,"graphql"):"http://localhost:8000/graphql"}),ni=Object(m.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,i=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(i))})),n&&console.log("[Network error]: ".concat(n))})),ii=Object(u.a)([ni,ti]),ai=new b.a({cache:new O.a,link:ii});var ri=function(){return Object(k.jsxs)(p.a,{client:ai,children:[Object(k.jsx)(Xn,{}),Object(k.jsx)(Zn.a,{})]})};d.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(ri,{})}),document.getElementById("root"))}},[[447,1,2]]]);
//# sourceMappingURL=main.07c296c3.chunk.js.map